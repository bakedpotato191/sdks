--- !tapi-tbd-v3
archs:                 [ arm64, arm64e ]
platform:              ios
flags:                 [ flat_namespace ]
install-name:          /System/Library/PrivateFrameworks/VisualVoicemail.framework/IMAP.vvservice/IMAP
current-version:       1
compatibility-version: 1
objc-constraint:       retain_release
exports:
  - archs:                [ arm64, arm64e ]
    symbols:              [ _H_X_APPLEVM_DELETION_DATE, _H_X_APPLEVM_DURATION,
                            _H_X_APPLEVM_MESSAGE_VERSION, _IMAPSetupLogging,
                            _getAddressFamilyName, _isSameSubnet,
                            _isValidAddressFamily, _kAppleVMActiveGreetingFlag,
                            _kCurrentAppleVMMessageVersion,
                            _kGreetingsMailboxName,
                            _kIMAPServiceAccountDataClass,
                            _kIMAPServiceAccountInfoTask,
                            _kIMAPServiceAllowedFQDNServers,
                            _kIMAPServiceAllowedIPv4Servers,
                            _kIMAPServiceAllowedIPv6Servers,
                            _kIMAPServiceBeaconAddress,
                            _kIMAPServiceBeaconServiceCenterAddress,
                            _kIMAPServiceBeaconTimeout,
                            _kIMAPServiceBodyCachingTaskName,
                            _kIMAPServiceBodyRetrievingTaskName,
                            _kIMAPServiceBypassSMSCAvailabilityCheck,
                            _kIMAPServiceChangePINTaskName,
                            _kIMAPServiceClientManagesTrash,
                            _kIMAPServiceDeliverLegacyNotificationsBeforeSetup,
                            _kIMAPServiceFlagPushTaskName,
                            _kIMAPServiceIdleConnectionTimeout,
                            _kIMAPServiceLibraryRecordsAddedNotification,
                            _kIMAPServiceMaxGreetingDuration,
                            _kIMAPServiceMaxPINLength,
                            _kIMAPServiceMaximumBeaconCount,
                            _kIMAPServiceMinPINLength,
                            _kIMAPServicePreferredAuthenticationScheme,
                            _kIMAPServiceRetrieveGreetingTaskName,
                            _kIMAPServiceSendBeaconOnLoginFailure,
                            _kIMAPServiceSetCustomGreetingTaskName,
                            _kIMAPServiceSetDefaultGreetingTaskName,
                            _kIMAPServiceSupportsGreetingNotification,
                            _kIMAPServiceSyncTaskName, _kIMAPServiceUsesMWI,
                            _kIMAPServiceUsesSSL, _kInboxMailboxName,
                            _kTrashMailboxName ]
    objc-classes:         [ IMAPNotificationInterpreter, IMAPService,
                            IMAPServiceAccount, IMAPServiceActivityController,
                            IMAPServiceBodyLoadContext,
                            IMAPServiceBodyLoadMonitor, IMAPServiceConnection,
                            IMAPServiceGreetingLibrary, IMAPServiceGreetingStore,
                            IMAPServiceLibrary, IMAPServiceLibraryMessage,
                            IMAPServiceStore, _VVMFLogInterceptor ]
    objc-ivars:           [ IMAPService._activityController,
                            IMAPService._addedRecords,
                            IMAPService._attachmentManager,
                            IMAPService._bodyLoadMonitor,
                            IMAPService._greetingDuration,
                            IMAPService._greetingLock, IMAPService._greetingType,
                            IMAPService._imapParameters,
                            IMAPService._imapServiceFlags,
                            IMAPService._messageChangeQueue,
                            IMAPService._nextBeaconTime,
                            IMAPService._pendingDeletes,
                            IMAPService._pendingDeletesLock,
                            IMAPServiceAccount._cachedStores,
                            IMAPServiceAccount._checkInForcefully,
                            IMAPServiceAccount._hasBeenInvalidated,
                            IMAPServiceAccount._idleLock,
                            IMAPServiceAccount._idleTimeout,
                            IMAPServiceAccount._idleTimer,
                            IMAPServiceAccount._nextIdleFire,
                            IMAPServiceAccount._offlineCachePath,
                            IMAPServiceAccount._serviceAccountLock,
                            IMAPServiceAccount._storeCacheLock,
                            IMAPServiceActivityController._activeActivities,
                            IMAPServiceActivityController._activityToTaskType,
                            IMAPServiceActivityController._inProcessRecords,
                            IMAPServiceActivityController._service,
                            IMAPServiceBodyLoadContext._base64,
                            IMAPServiceBodyLoadContext._expectedLength,
                            IMAPServiceBodyLoadContext._fd,
                            IMAPServiceBodyLoadContext._headersDict,
                            IMAPServiceBodyLoadContext._lastOffset,
                            IMAPServiceBodyLoadContext._lengthWritten,
                            IMAPServiceBodyLoadContext._notificationDict,
                            IMAPServiceBodyLoadContext._parser,
                            IMAPServiceBodyLoadContext._recordLibraryId,
                            IMAPServiceBodyLoadContext._service,
                            IMAPServiceBodyLoadMonitor._loadContextsByLibraryId,
                            IMAPServiceBodyLoadMonitor._service,
                            IMAPServiceConnection._checkedOutThreads,
                            IMAPServiceConnection._checkedOutThreadsLock,
                            IMAPServiceGreetingLibrary._messages,
                            IMAPServiceLibraryMessage._messageIDHeader,
                            IMAPServiceStore._imapServiceStoreFlags ]
undefineds:
  - archs:                [ arm64, arm64e ]
    symbols:              [ _CFAbsoluteTimeGetCurrent, _CFArrayCreate,
                            _CFArrayCreateCopy, _CFArrayCreateMutableCopy,
                            _CFArrayGetCount, _CFArrayGetValueAtIndex,
                            _CFArrayRemoveValueAtIndex, _CFArraySortValues,
                            _CFDictionaryCreate, _CFDictionaryCreateMutable,
                            _CFDictionaryGetValue, _CFDictionaryRemoveValue,
                            _CFDictionarySetValue, _CFMakeCollectable,
                            _CFNotificationCenterAddObserver,
                            _CFNotificationCenterGetDarwinNotifyCenter,
                            _CFNotificationCenterGetLocalCenter,
                            _CFNotificationCenterPostNotification,
                            _CFNotificationCenterRemoveEveryObserver, _CFRelease,
                            _CFStringGetCStringPtr, _CFStringGetCharacters,
                            _CFStringGetCharactersPtr, _CFStringHasSuffix,
                            _CPIsInternalDevice, _H_CONTENT_TRANSFER_ENCODING,
                            _H_CONTENT_TYPE, _H_DATE, _H_MESSAGE_ID, _H_MIME_VERSION,
                            _H_SUBJECT,
                            _IMAPAccountOfflineOperationQueuedNotification,
                            _IMAPServerPathPrefix, _MFCreateArrayForMessageFlags,
                            _MFMailAccountUsername, _MFMessageErrorDomain,
                            _MFMessageFlagsByApplyingDictionary,
                            _MFMimeHeaderFromKey, _MFMimeHeaderReplyToKey,
                            _MFReloadNetworkLoggingNotification,
                            _MailAccountHostname, _MailAccountPortNumber,
                            _MailMessageStoreMessagesAdded, _MessageIsDeleted,
                            _MessageIsRead,
                            _MonitoredActivityDidAddActivityTarget,
                            _MonitoredActivityEnded,
                            _MonitoredActivityNewPrimaryTarget,
                            _MonitoredActivityOldPrimaryTarget,
                            _MonitoredActivityPrimaryTargetChanged,
                            _MonitoredActivityStarted, _NSDefaultRunLoopMode,
                            _NSHomeDirectory, _NSLog, _NSStringFromBOOL,
                            _NSStringFromClass, _NSStringFromRange,
                            _NSStringFromSelector,
                            _TUGuaranteeExecutionOnMainThreadAsync,
                            _TURemoveEveryTelephonyCenterObserver,
                            _VMCarrierIMAPParametersChangedNotification,
                            _VMCarrierNotificationUserInfoAccountUUID,
                            _VMCarrierNotificationUserInfoIMAPParameters,
                            _VMCarrierStateResponseErrorCodeTemporaryFailure,
                            _VMCopyDictionaryForNotificationString,
                            _VMPhoneNumberNormalizedPhoneNumberString,
                            _VMStoreAddRecord, _VMStoreCopyFirstRecordWithToken,
                            _VMStoreCopyFirstRecordWithTokenInMailbox,
                            _VMStoreCopyGreetingPath,
                            _VMStoreCopyOfAllRecordsWithFlags,
                            _VMStoreCopyOfAllRecordsWithFlagsInRemoteUIDRange,
                            _VMStoreCopyOfAllRemoteUIDsWithTrashState,
                            _VMStoreCopyRecordWithIdentifier,
                            _VMStoreCopyRecordWithRemoteUID,
                            _VMStoreCopyRecordsWithTokenInMailbox,
                            _VMStoreCountOfRecordsWithFlags,
                            _VMStoreGetReceiverMigration,
                            _VMStoreGetTimestampForTokenWithKey,
                            _VMStoreGetUIDValidity,
                            _VMStoreRecordChangedFlagsFromServerKey,
                            _VMStoreRecordChangedFlagsKey,
                            _VMStoreRecordChangedFlagsReceiverKey,
                            _VMStoreRecordCopyCallbackNumber,
                            _VMStoreRecordCopyDataPath,
                            _VMStoreRecordCopyDescription,
                            _VMStoreRecordCopyFlagsDescription,
                            _VMStoreRecordCopyReceiver, _VMStoreRecordCopySender,
                            _VMStoreRecordCopyToken,
                            _VMStoreRecordFlagsChangedNotification,
                            _VMStoreRecordFlagsDidChangeNotification,
                            _VMStoreRecordFlagsWillChangeNotification,
                            _VMStoreRecordGetDate, _VMStoreRecordGetFlags,
                            _VMStoreRecordGetIdentifier,
                            _VMStoreRecordGetRemoteUID,
                            _VMStoreRecordSetCallbackNumber,
                            _VMStoreRecordSetDuration, _VMStoreRecordSetFlag,
                            _VMStoreRecordSetFlags,
                            _VMStoreRecordSetFlagsFromServer,
                            _VMStoreRecordSetReceiver,
                            _VMStoreRecordSetRemoteUID, _VMStoreRecordSetSender,
                            _VMStoreRemoveRecord,
                            _VMStoreRemovedRecordsNotification, _VMStoreSave,
                            _VMStoreSetReceiverMigration,
                            _VMStoreSetTimestampForTokenWithKey,
                            _VMStoreSetUIDValidity,
                            _VVServiceDataAvailableNotification,
                            _VVServiceDataReceiveBeganNotification,
                            _VVServiceDataReceiveContinuedNotification,
                            _VVServiceFinishedAddingRecordsNotification,
                            _VVServiceRecordsAddedNotification,
                            _VVServiceSyncStatusChangedNotification,
                            _VVServiceTaskCancelledNotification,
                            _VVServiceTaskEndedNotification,
                            _VVServiceTaskStartedNotification,
                            _VVVerifierChangedNotification, _XPC_ACTIVITY_DELAY,
                            _XPC_ACTIVITY_GRACE_PERIOD, _XPC_ACTIVITY_INTERVAL,
                            _XPC_ACTIVITY_INTERVAL_1_MIN, _XPC_ACTIVITY_PRIORITY,
                            _XPC_ACTIVITY_PRIORITY_UTILITY,
                            _XPC_ACTIVITY_REPEATING, __Block_object_assign,
                            __Block_object_dispose, __NSConcreteGlobalBlock,
                            __NSConcreteStackBlock,
                            __TUAssertShouldCrashApplication, __Unwind_Resume,
                            __VMStoreCopyTokenForKey,
                            ___CFConstantStringClassReference,
                            ___mfEnableCallStackLogging, ___objc_personality_v0,
                            ___stack_chk_fail, ___stack_chk_guard,
                            __dispatch_main_q, __objc_empty_cache,
                            __os_log_error_impl, __os_log_impl, _close,
                            _dispatch_after, _dispatch_async,
                            _dispatch_get_global_queue, _dispatch_once,
                            _dispatch_queue_create, _dispatch_release,
                            _dispatch_semaphore_create,
                            _dispatch_semaphore_signal, _dispatch_semaphore_wait,
                            _dispatch_sync, _dispatch_time, _inet_pton,
                            _kCFAllocatorDefault, _kCFTypeDictionaryKeyCallBacks,
                            _kCFTypeDictionaryValueCallBacks,
                            _kCTIndicatorsVoiceMailURL,
                            _kVMGreetingChangedNotificationName,
                            _kVMMailboxChangedNotificationName,
                            _kVMNotificationHostKey, _kVMNotificationLoginKey,
                            _kVMNotificationMWIKey, _kVMNotificationNameKey,
                            _kVMNotificationPasswordKey, _kVMNotificationPortKey,
                            _kVMNotificationStateKey,
                            _kVMNotificationTimestampKey,
                            _kVMServerChangedNotificationName,
                            _kVMStateNotificationName, _kVVErrorDomain,
                            _kVVLastWarnedUsageDefault,
                            _kVVServiceAccountUUIDKey,
                            _kVVServiceAddedRecordsKey,
                            _kVVServiceCurrentDataLengthKey, _kVVServiceErrorKey,
                            _kVVServiceExpectedDataLengthKey,
                            _kVVServiceRecordKey, _kVVServiceSuppressErrorKey,
                            _kVVServiceTaskTypeKey,
                            _kVVServiceTaskWillBeRetriedKey,
                            _kVVVerifierBeaconResponseReceivedCheckpointKey,
                            _kVVVerifierBeaconSentCheckpointKey,
                            _kVVVerifierSMSCAvailableCheckpointKey,
                            _kVVVerifierServerLoginCheckpointKey,
                            _kVVVerifierValidCarrierBundleCheckpointKey,
                            _objc_alloc, _objc_alloc_init, _objc_autorelease,
                            _objc_autoreleasePoolPop, _objc_autoreleasePoolPush,
                            _objc_begin_catch, _objc_copyWeak, _objc_destroyWeak,
                            _objc_end_catch, _objc_enumerationMutation,
                            _objc_exception_rethrow, _objc_getProperty,
                            _objc_initWeak, _objc_loadWeak, _objc_loadWeakRetained,
                            _objc_msgSend, _objc_msgSendSuper2, _objc_opt_class,
                            _objc_opt_isKindOfClass, _objc_opt_new, _objc_release,
                            _objc_retain, _objc_setProperty_atomic,
                            _objc_setProperty_nonatomic,
                            _objc_setProperty_nonatomic_copy, _objc_storeWeak,
                            _objc_terminate, _open, _os_log_type_enabled,
                            _pthread_once, _unlink, _vm_imap_log, _write,
                            _xpc_activity_get_state, _xpc_activity_register,
                            _xpc_activity_set_state, _xpc_activity_unregister,
                            _xpc_dictionary_create, _xpc_dictionary_set_bool,
                            _xpc_dictionary_set_int64,
                            _xpc_dictionary_set_string, _xpc_release,
                            dyld_stub_binder ]
    objc-classes:         [ IMAPAccount, MFActivityMonitor,
                            MFAttachmentLibraryManager, MFAttachmentManager,
                            MFAuthScheme, MFConnection, MFData, MFError,
                            MFIMAPConnection, MFIMAPMessage, MFInvocationQueue,
                            MFLibraryIMAPStore, MFLibraryMessage, MFLibraryStore,
                            MFMailMessageStore, MFMessageDetails,
                            MFMessageFileWrapper, MFMessageHeaders,
                            MFMessageLibrary, MFMessageWriter,
                            MFMonitoredInvocation, MFMutableMessageHeaders,
                            MFProgressiveMimeParser, NSArray, NSAssertionHandler,
                            NSAutoreleasePool, NSBundle, NSDate,
                            NSDateComponentsFormatter, NSDictionary, NSError,
                            NSFileManager, NSIndexSet, NSLock, NSMutableArray,
                            NSMutableData, NSMutableDictionary, NSMutableSet,
                            NSNotificationCenter, NSNumber, NSObject,
                            NSPropertyListSerialization, NSRecursiveLock,
                            NSRunLoop, NSString, NSThread, NSTimer, NSURL,
                            NSUserDefaults, NSValue, TUPhoneNumber, TUPrivacyManager,
                            VMAWDReporter, VMCarrierStateRequest,
                            VVCarrierParameters, VVNotificationInterpreter,
                            VVService ]
    objc-eh-types:        [ NSException ]
    objc-ivars:           [ IMAPAccount._cachedConnections,
                            IMAPAccount._connectionLock,
                            IMAPAccount._flagChangesLock,
                            MFLibraryIMAPStore._serverUidNext,
                            MFLibraryStore._library, MFMailMessageStore._account,
                            MFMessageDetails.dateReceived,
                            MFMessageDetails.library, MFMessageDetails.libraryID,
                            MFMessageDetails.mailboxID,
                            MFMessageDetails.messageFlags, MFMessageDetails.uid,
                            MailAccount._library, VVService._serviceFlags ]
...
